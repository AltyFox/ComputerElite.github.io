<!DOCTYPE html>
<html>
    <head>
        <title>Beat Saber 1.16.4 mods finder</title>
        <meta property="og:site_name" content="ComputerElite">
        <meta property="og:title" content="Beat Saber 1.16.4 mods finder" />
        <meta property="og:description" content="Find unverified Beat Saber mods for 1.16.4" />
        <meta property="og:url" content="https://computerelite.github.io/tools/Beat_Saber/1.16.4_modFinder.html" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link href="../../css/standard.css" type="text/css" rel="stylesheet">
        <script src="../../js/standard.js"></script>
        <link rel="icon" href="../../assets/CE_64px.png" type="image/x-icon">
        <style>
        td {
            padding: 10px;
        }

        .os {
            font-size: 16px;
            color: #EEE;
        }

        .item {
            flex: 1;
            width: 25%;
            word-wrap: break-word;
            padding: 3px;
        }

        .itemR {
            flex: 1;
            width: 25%;
            word-wrap: break-word;
            padding: 3px;
            color: #FF2222;
        }

        .devicesRowItem {
            flex: 1;
            width: 16%;
            text-align: center;
        }

        .devicesRowItemN {
            flex: 1;
            width: 16%;
            color: #FF2222;
            text-align: center;
        }

        .devicesRowItemY {
            flex: 1;
            width: 16%;
            color: #00BB00;
            text-align: center;
        }

        .devicesRow {
            flex: 1;
            display: flex;
            flex-direction: row;
            margin-top: 3px;
            margin-bottom: 3px;
        }
        </style>
    </head>
    <body style="font-size: 14px;">
        <div style="display: flex; flex-direction: column; width: 100%; height: 100%;">
            <div style="flex: 1; flex-grow: 0; text-align: center;">
                <div style="background-color: rgb(47,49,54); display: inline-block; margin-top: 20px; margin-bottom: 10px; width: 80%;">
                    <div style=" padding: 10px;">
                        <div style="font-size: 24px;">Beat Saber Mod finder for 1.16.4 +</div>
                    </div>
                    <div class="attention" style="width: fit-content; margin: auto;">
                        <div class="attentionHeader">
                            Info
                        </div>
                        These mods are not verified. This site simply shows what mods it can find on GitHub in the new qmod format (Beat Saber 1.16.4 +). These mods <i>can</i> be unstable. Use at own risk. You may not get support with all mods.<br>
                        Do not reload the page too often as that'll create rate limits not allowing you to use this site for about an hour
                    </div>
                </div>
            </div>
            <div style="flex: 1; flex-grow: 0; text-align: center;">
                <div style="background-color: rgb(47,49,54); display: inline-block; margin-top: 10px; width: 80%; margin-bottom: 10px;">
                    <div style="padding: 10px;">
                        <div style="font-size: 24px;">Mods</div>
                        <div class="headerDescription" style="width: 50%; margin: auto;">Pulled from <a href="https://github.com/" target="_blank">GitHub</a></div>
                        <br/>
                        <a style="font-size: 22px; color: #EEEEEE; text-align: center; display: flex; justify-content: center; width: 100%;">
                            <div class="item">Mod publisher</div>
                            <div class="item">Repository</div>
                            <div class="item">Download mod</div>
                        </a>
                        <div id="mods" style="display: flex; color: #EEEEEE; width: 100%; justify-content: space-evenly; flex-direction: column;">
                            Loading
                        </div>
                        <br/>
                    </div>
                    <div style="text-align: center; font-size: 11px; color: #888; margin-top: 20px; padding: 10px;">
                        This does only check the file extension to be <code>.qmod</code>. This does not mean the mod is stable.
                    </div>
                </div>
            </div>
        </div>
        <script>
            var mods = []
            var badmods = [
            ]
            const modsContainer = document.getElementById("mods")

            AddMods("beat saber")
            
            function AddMods(query) {
                fetch(`https://api.github.com/search/repositories?q=${query.replace(/ /g, "+")}+language:c%2B%2B&sort=updated`).then(res => {
                res.json().then(json => {
                    console.log(json)
                    
                    json.items.forEach(e => {
                        for(let ii = 0; ii < badmods.length; ii++) {
                            if(badmods[ii].repo == e.name && badmods[ii].publisher == e.owner.login) return
                        }
                        for(let ii = 0; ii < mods.length; ii++) {
                            if(mods[ii].repo == e.name && mods[ii].publisher == e.owner.login) return
                        }
                        fetch(e.releases_url.replace("{/id}", "")).then(res => {
                            res.json().then(json2 => {
                                var mod = {
                                    repo: e.name,
                                    publisher: e.owner.login
                                }
                                for(let i = 0; i < json2.length; i++) {
                                    json2[i].assets.forEach(e => {
                                        if(e.name.endsWith(".qmod")) {
                                            mod.download = e.browser_download_url
                                            mod.name = e.name
                                        }
                                    })
                                    if(mod.name) break
                                }
                                if(mod.name) mods.push(mod)
                                UpdateMods()
                                console.log(json)
                            })
                        }).catch(err => {
                            modsContainer.innerHTML = "Error: " + err.status + ". please try again later (reccomemnded: 1 hour)"
                        })
                    })
                }).catch(err => {
                    modsContainer.innerHTML = "Error: " + err.status + ". please try again later (reccomemnded: 1 hour)"
                })
            })
            }

            function UpdateMods() {
                modsContainer.innerHTML = ""
                mods.forEach(e => {
                    modsContainer.innerHTML += GetFormatted(e)
                })
                if(modsContainer.innerHTML == ""){
                    modsContainer.innerHTML = "No mods or error"
                }
            }

            function GetFormatted(element) {
                return `<a style="font-size: 16px; color: #EEEEEE; text-align: center; display: flex; width: 100%;">
                            <div class="item" style="cursor: pointer; color: #30A2EC;" onclick="window.location.href = 'https://github.com/${element.publisher}'">${element.publisher}</div>
                            <div class="item" style="cursor: pointer; color: #30A2EC;" onclick="window.location.href = 'https://github.com/${element.publisher}/${element.repo}'">${element.repo}</div>
                            <div class="item" style="cursor: pointer; color: #30A2EC;" onclick="window.location.href = '${element.download}'">${element.name}</div>
                        </a>`
            }
            
        </script>
    </body>
</html>