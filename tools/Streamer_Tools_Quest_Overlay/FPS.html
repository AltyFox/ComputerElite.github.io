<!DOCTYPE html>
<html>
    <head>
        <title>Streamer Tools Overlay</title>
        <meta property="og:site_name" content="ComputerElite">
        <meta property="og:title" content="Streamer Tools Viewer Quest Overlay Overview" />
        <meta property="og:description" content="Overlay for Streamer Tools Viewer for Beat Saber on Quest" />
        <meta property="og:url" content="https://computerelite.github.io/tools/Streamer_Tools_Quest_Overlay/" />
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link href="../../css/standard.css" type="text/css" rel="stylesheet">
        <link rel="icon" href="assets/CE_64px.png" type="image/x-icon">
    </head>
    <body>
        UGLY FPS LOGGER WHICH CONNECTS WITH STREAMER TOOLS CLIENT TM
        <div id="chart">

        </div>
        <script src="../../js/standard.js"></script>
        <script src="../../js/plotly.min.js"></script>
        <script>
            Plotly.plot('chart', [{
                y: [0],
                type: 'line'
            }])

            var i = 0;

            let width = 100;

            setInterval(() => {
                fetch("http://localhost:53510/api/raw").then((res) => {
                    res.json().then((json) => {
                        Plotly.extendTraces('chart', {y: [[json.fps]]}, [0])
                    })
                })
                if(i > width) {
                    Plotly.relayout('chart', {
                        xaxis: {
                            range: [i - width, i]
                        }
                    })
                }
                i++;
            }, 50)
        </script>
    </body>
</html>